<!DOCTYPE html>
<html>
    <head>
        <title>CCC Samples - Small Multiples Chart</title>

        <meta name="svg.render.forceflash" content="true">

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script type="text/javascript" src="cdf/Base.js"></script>
        <script type="text/javascript" src="cdf/jquery.js"></script>
        <script type="text/javascript" src="cdf/jquery.tooltip.js"></script>
        <script type="text/javascript" src="data/q01-01.js"></script>
        <script type="text/javascript" src="data/steel-wheels.js"></script>
        <script type="text/javascript" src="lib/protovis-d3.3.js"></script>
        <script type="text/javascript" src="lib/protovis-msie.js"></script>
        <script type="text/javascript" src="lib/jquery.tipsy.js"></script>
        <script type="text/javascript" src="lib/tipsy.js"></script>
        <link type="text/css" href="lib/tipsy.css" rel="stylesheet" />
        <script type="text/javascript" src="def/def.js"></script>

        
        <!-- @SCRIPTSBEG@ -->
        <script type="text/javascript" src="pvc/pvc.js"></script>
        <script type="text/javascript" src="pvc/pvc.text.js"></script>
        <script type="text/javascript" src="pvc/pvc.color.js"></script>
        <script type="text/javascript" src="pvc/data/_data.js"></script>
        <script type="text/javascript" src="pvc/data/meta/DimensionType.js"></script>
        <script type="text/javascript" src="pvc/data/meta/ComplexType.js"></script>
        <script type="text/javascript" src="pvc/data/translation/TranslationOper.js"></script>
        <script type="text/javascript" src="pvc/data/translation/MatrixTranslationOper.js"></script>
        <script type="text/javascript" src="pvc/data/translation/CrosstabTranslationOper.js"></script>
        <script type="text/javascript" src="pvc/data/translation/RelationalTranslationOper.js"></script>
        <script type="text/javascript" src="pvc/data/Atom.js"></script>
        <script type="text/javascript" src="pvc/data/Complex.js"></script>
        <script type="text/javascript" src="pvc/data/ComplexView.js"></script>
        <script type="text/javascript" src="pvc/data/Datum.js"></script>
        <script type="text/javascript" src="pvc/data/Dimension.js"></script>
        <script type="text/javascript" src="pvc/data/Data.js"></script>
        <script type="text/javascript" src="pvc/data/Data.load.js"></script>
        <script type="text/javascript" src="pvc/data/Data.selected.js"></script>
        <script type="text/javascript" src="pvc/data/GroupingSpec.js"></script>
        <script type="text/javascript" src="pvc/data/DataOper.js"></script>
        <script type="text/javascript" src="pvc/data/GroupingOper.js"></script>
        <script type="text/javascript" src="pvc/data/Data.operations.js"></script>
        <script type="text/javascript" src="pvc/data/Data.compat.js"></script>
        <script type="text/javascript" src="pvc/visual/Role.js"></script>
        <script type="text/javascript" src="pvc/visual/Scene.js"></script>
        <script type="text/javascript" src="pvc/visual/sign/Sign.js"></script>
        <script type="text/javascript" src="pvc/visual/sign/Dot.js"></script>
        <script type="text/javascript" src="pvc/visual/sign/Line.js"></script>
        <script type="text/javascript" src="pvc/visual/sign/Area.js"></script>
        <script type="text/javascript" src="pvc/visual/sign/Bar.js"></script>
        <script type="text/javascript" src="pvc/visual/sign/Rule.js"></script>
        <script type="text/javascript" src="pvc/visual/Context.js"></script>
        <script type="text/javascript" src="pvc/visual/CartesianAxis.js"></script>
        <script type="text/javascript" src="pvc/pvcAbstract.js"></script>
        <script type="text/javascript" src="pvc/pvcBaseChart.js"></script>
        <script type="text/javascript" src="pvc/pvcBasePanel.js"></script>
        <script type="text/javascript" src="pvc/pvcMultiChartPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcTitlePanel.js"></script>
        <script type="text/javascript" src="pvc/pvcLegendPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcTimeseriesAbstract.js"></script>
        <script type="text/javascript" src="pvc/pvcCartesianAbstract.js"></script>
        <script type="text/javascript" src="pvc/pvcGridDockingPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcCartesianGridDockingPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcCartesianAbstractPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcCategoricalAbstract.js"></script>
        <script type="text/javascript" src="pvc/pvcAxisPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcPieChart.js"></script>
        <script type="text/javascript" src="pvc/pvcBarAbstractPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcBarAbstract.js"></script>
        <script type="text/javascript" src="pvc/pvcBarPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcBarChart.js"></script>
        <script type="text/javascript" src="pvc/pvcNormalizedBarPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcNormalizedBarChart.js"></script>
        <script type="text/javascript" src="pvc/pvcWaterfallPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcWaterfallChart.js"></script>
        <script type="text/javascript" src="pvc/pvcLineDotAreaPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcLineDotArea.js"></script>
        <script type="text/javascript" src="pvc/pvcHeatGridChart.js"></script>
        <script type="text/javascript" src="pvc/pvcMetricXYAbstract.js"></script>
        <script type="text/javascript" src="pvc/pvcMetricLineDotPanel.js"></script>
        <script type="text/javascript" src="pvc/pvcMetricLineDot.js"></script>
        <script type="text/javascript" src="pvc/pvcBulletChart.js"></script>
        <script type="text/javascript" src="pvc/pvcParallelCoordinates.js"></script>
        <script type="text/javascript" src="pvc/pvcDataTree.js"></script>
        <script type="text/javascript" src="pvc/data/translation/BoxplotChartTranslationOper.js"></script>
        <script type="text/javascript" src="pvc/pvcBoxplotChart.js"></script>
        <!-- @SCRIPTSEND@ -->
    
        <link type="text/css" rel="stylesheet" href="cdf/jquery.tooltip.css" />
        <link type="text/css" rel="stylesheet" href="pvcDocUtils.css"/>
        <script type="text/javascript" src="pvcDocUtils.js"></script>
        <script type="text/javascript">
        var baseExampleDef = {
            def: {
                animate: false,
                legend:  true,
                legendPosition: "right",
                legendAlign: "top",
                selectable:  true,
                hoverable: true,
                margins: {all: 10},
                xAxisFullGrid: true,
                yAxisSize: 30,
                yAxisDomainRoundMode: 'tick',
                timeSeries: false,
                //timeSeriesFormat: "%Y-%m-%d",
                axisOverlappedLabelsHide: true,
                legendMinMarginX: 10,

                extensionPoints: {
                    titleLabel_font: "bold 14px sans-serif"
                },
                
                /* Data format */
                crosstabMode: false,
                seriesInRows: false
             }
        };
        
        pvc.examples.register(def.create(baseExampleDef, {
            id: 'multi01',
            className: 'BarChart',
            dataVar:   'testHeatGridComp',
            showProps: ['stacked'],
            def: {
                /* Top */
                title:      "Multi-chart of horizontal stacked bar charts",
                //width:  800,
                //height: 100,

                /* Multi-chart */
                //multiChartColumnIndexes: 1,
                //multiChartWrapColumn: Infinity,
                //multiChartLimit: 10,


                /* Small charts */
                orientation: 'horizontal',
                stacked:     true,
                xAxisTitle:  "Quantity sold",
                xAxisSize:   50,
                yAxisTitle:  "Country",
                yAxisSize:   90,
                xAxisDomainRoundMode:"tick",
                showValues:  false,

                /* Data translation */
                crosstabMode: true,
                readers: [
                   {names: 'series',           indexes: 2}, // Product
                   {names: 'multiChartColumn', indexes: 3}, // Territory
                   {names: 'category',         indexes: 4}, // Country
                   {names: 'value',            indexes: 5}
                ],
                isMultiValued: true,
                dataOptions: {
                    categoriesCount :  2,
                    measuresInColumns: true
                }
             }
        }));
        
        pvc.examples.register(def.create(baseExampleDef, {
            id: 'multi02',
            className: 'LineChart',
            dataVar:   'steelWheels01',
            showProps: ['showAreas', 'showDots', 'stacked'],
            def: {
                /* Top */
                title:   "Multi-chart of line charts with area",
                height:  100,
                
                /* Multi-chart */
                //multiChartColumnIndexes: 1,
                //multiChartWrapColumn: Infinity,
                multiChartLimit: 9,
                
                /* Small charts */
                //orientation: 'horizontal',
                yAxisSize:   40,
                xAxisSize:   90,
                yAxisDesiredTickCount: 4,
                showValues:  false,
                showAreas:   true,
                //showDots:    true,
                extensionPoints: {
                    xAxisLabel_textAngle:    -Math.PI/4,
                    xAxisLabel_textAlign:    "right",
                    xAxisLabel_textBaseline: "top"
                },
        
                /* Visual Role mapping */
                visualRoles: {
                    multiChartColumn: "territory, country",
                    series:           "year desc, quarter desc",
                    category:         "line",
                    value:            "sales"
                },
                
                /* Data definition */
                dimensions: {
                    year:      {label: "Year", formatter: steelWheels01.yearAndQuarterFormatter },
                    quarter:   {label: "Quarter", formatter: steelWheels01.yearAndQuarterFormatter },
                    territory: {label: "Territory", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    country:   {label: "Country", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    line:      {label: "Product Line", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    sales:     {label: "Sales", valueType: Number}
                },
                    
                /* Data mapping */
                readers: [
                   {names: ['year', 'quarter', 'territory', 'country', 'line', 'sales']}
                ],
                
                /* Source Data Format */
                crosstabMode: true,
                isMultiValued: true,
                dataOptions: {
                    categoriesCount :  3,
                    measuresInColumns: true
                }
             }
        }));
        
        pvc.examples.register(def.create(baseExampleDef, {
            id: 'multi03',
            className: 'PieChart',
            dataVar:   'steelWheels01',
            //showProps: ['showAreas', 'stacked'],
            def: {
                /* Top */
                title:   "Multi-chart of pie charts",
                height:  100,
                
                /* Multi-chart */
                //multiChartColumnIndexes: 1,
                //multiChartWrapColumn: Infinity,
                multiChartLimit: 9,
                

                /* Small charts */
                showValues:  true,
                innerGap: 0.9,
                showValuePercentage: true,
                extensionPoints: {
                    //pie_innerRadius:20,
                },
        
                /* Visual Role mapping */
                visualRoles: {
                    multiChartColumn: "territory, country",
                    //series:           "year desc, quarter desc",
                    category:         "line",
                    value:            "sales"
                },
                
                /* Data definition */
                dimensions: {
                    year:      {label: "Year", formatter: steelWheels01.yearAndQuarterFormatter },
                    quarter:   {label: "Quarter", formatter: steelWheels01.yearAndQuarterFormatter },
                    territory: {label: "Territory", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    country:   {label: "Country", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    line:      {label: "Product Line", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    sales:     {label: "Sales", valueType: Number}
                },
                    
                /* Data mapping */
                readers: [
                    {names: ['year', 'quarter', 'territory', 'country', 'line', 'sales']}
                ],
                
                /* Source Data Format */
                crosstabMode: true,
                isMultiValued: true,
                dataOptions: {
                    categoriesCount :  3,
                    measuresInColumns: true
                }
             }
        }));
        
        pvc.examples.register(def.create(baseExampleDef, {
            id: 'multi04',

            className: 'MetricDotChart',
            dataVar:   'testHeatGrid4Measures',
            showProps: ['showLines', 'showDots'],
            def: {
                /* Top */
                title:   "Multi-chart of scatter dot charts (Qty x Sales)",
                height:  100,
                
                /* Multi-chart */
                //multiChartColumnIndexes: 1,

                //multiChartWrapColumn: Infinity,
                multiChartLimit: 9,
                
                /* Small charts */
                //orientation: 'horizontal',
                originIsZero: false,
                
                yAxisSize:  60,
                xAxisSize:  40,
                showLines:  false,
                showValues: false,
                
                xAxisFullGrid: true,
                xAxisEndLine: true,
                xAxisDomainRoundMode:"tick",
                yAxisFullGrid: true,
                yAxisEndLine: true,
                
                /* Visual Role mapping */
                visualRoles: {
                    multiChartColumn: "territory, country",
                    series:  "pline, product",
                    x: "quantity",
                    y: "sales",
                    color: "esales"//,
                    //dotSize: "psales"
                },
                
                /* Data definition */

                dimensions: {
                    territory: {label: "Territory" },
                    country:   {label: "Country" },
                    pclass:    {label: "Class" },
                    pline:     {label: "Product Line" },
                    product:   {label: "Product" },
                    quantity:  {label: "Quantity",       valueType: Number},
                    sales:     {label: "Sales",          valueType: Number},
                    esales:    {label: "Expected Sales", valueType: Number},
                    psales:    {label: "Previous Sales", valueType: Number}
                },
                    
                /* Data mapping */
                readers: [
                   {names: ['pclass', 'pline', 'product',
                            'territory', 'country',
                            'quantity', 'sales', 'esales', 'psales']}
                ],
                
                /* Source Data Format */
                crosstabMode: true,
                isMultiValued: true,
                dataOptions: {
                    categoriesCount :  2,
                    measuresInColumns: true
                }
             }
        }));

        pvc.examples.register(def.create(baseExampleDef, {
            id: 'multi05',
            className: 'BarChart',
            dataVar:   'steelWheels01',
            showProps: ['stacked'],
            def: {
                /* Top */
                title:   "Multi-chart of bar charts",
                height:  100,

                /* Multi-chart */
                //multiChartColumnIndexes: 1,
                //multiChartWrapColumn: Infinity,
                multiChartLimit: Infinity,

                /* Small charts */
                orientation: 'horizontal',
                stacked:     true,
                //xAxisTitle:  "Sales",
                xAxisSize:   50,
                //yAxisTitle:  "Product Line",
                yAxisSize:   90,
                xAxisDomainRoundMode:"tick",
                showValues:  false,
                legendMinMarginX: 40,
                /* Visual Role mapping */
                visualRoles: {
                    multiChartColumn: "territory, country",
                    series:           "year desc, quarter desc",
                    category:         "line",
                    value:            "sales"
                },

                /* Data definition */
                dimensions: {
                    year:      {label: "Year", formatter: steelWheels01.yearAndQuarterFormatter },
                    quarter:   {label: "Quarter", formatter: steelWheels01.yearAndQuarterFormatter },
                    territory: {label: "Territory", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    country:   {label: "Country", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    line:      {label: "Product Line", formatter: steelWheels01.territoryAndCountryAndLineFormatter },
                    sales:     {label: "Sales", valueType: Number}
                },

                /* Data mapping */
                readers: [
                   {names: ['year', 'quarter', 'territory', 'country', 'line', 'sales']}
                ],

                /* Source Data Format */
                crosstabMode: true,
                isMultiValued: true,
                dataOptions: {
                    categoriesCount :  3,
                    measuresInColumns: true
                }
             }
        }));
        </script>
    </head>
    <body>
       <h2>Multi-chart examples</h2>
       <div id="examples"></div>
    </body>
</html>